{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pawan\\\\OneDrive\\\\Desktop\\\\team-management-fullcode\\\\team-management\\\\frontend\\\\src\\\\pages\\\\ChatPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { groupAPI, messageAPI } from '../services/api';\nimport { getSocket, joinRoom, sendMessage as socketSend, emitTypingStart, emitTypingStop } from '../services/socket';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEPT_COLORS = {\n  Frontend: 'var(--dept-frontend)',\n  Backend: 'var(--dept-backend)',\n  Sales: 'var(--dept-sales)',\n  Production: 'var(--dept-production)',\n  HR: 'var(--dept-hr)'\n};\nexport default function ChatPage() {\n  _s();\n  var _group$departmentId, _group$departmentId2;\n  const {\n    groupId\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  const [group, setGroup] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [typingUsers, setTypingUsers] = useState([]);\n  const [sending, setSending] = useState(false);\n  const messagesEndRef = useRef(null);\n  const typingTimerRef = useRef(null);\n  const socketRef = useRef(null);\n  const scrollToBottom = useCallback(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, []);\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const [groupRes, msgRes] = await Promise.all([groupAPI.getGroup(groupId), messageAPI.getGroupMessages(groupId)]);\n        setGroup(groupRes.data.data.group);\n        setMessages(msgRes.data.data.messages);\n      } catch (e) {\n        var _e$response, _e$response$data;\n        setError(((_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Failed to load chat. Access denied.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, [groupId]);\n\n  // Socket setup\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket || !group) return;\n    socketRef.current = socket;\n\n    // Join room\n    joinRoom(groupId);\n    const onNewMessage = ({\n      message\n    }) => {\n      setMessages(prev => [...prev, message]);\n      // Remove from typing when they send\n      setTypingUsers(prev => prev.filter(u => u.userId !== message.senderId._id));\n    };\n    const onError = ({\n      message: msg\n    }) => setError(msg);\n    const onUserTyping = ({\n      userId,\n      name\n    }) => {\n      setTypingUsers(prev => {\n        if (prev.find(u => u.userId === userId)) return prev;\n        return [...prev, {\n          userId,\n          name\n        }];\n      });\n    };\n    const onStoppedTyping = ({\n      userId\n    }) => {\n      setTypingUsers(prev => prev.filter(u => u.userId !== userId));\n    };\n    socket.on('new_message', onNewMessage);\n    socket.on('error', onError);\n    socket.on('user_typing', onUserTyping);\n    socket.on('user_stopped_typing', onStoppedTyping);\n    return () => {\n      socket.off('new_message', onNewMessage);\n      socket.off('error', onError);\n      socket.off('user_typing', onUserTyping);\n      socket.off('user_stopped_typing', onStoppedTyping);\n    };\n  }, [group, groupId]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, scrollToBottom]);\n  const handleSend = e => {\n    e.preventDefault();\n    if (!input.trim() || sending) return;\n    const socket = getSocket();\n    if (socket) {\n      socketSend(input.trim());\n      emitTypingStop();\n    } else {\n      // Fallback to REST\n      setSending(true);\n      messageAPI.sendMessage({\n        content: input.trim(),\n        groupId\n      }).then(res => setMessages(prev => [...prev, res.data.data.message])).catch(e => {\n        var _e$response2, _e$response2$data;\n        return setError(((_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message) || 'Failed to send');\n      }).finally(() => setSending(false));\n    }\n    setInput('');\n  };\n  const handleTyping = e => {\n    setInput(e.target.value);\n    emitTypingStart();\n    clearTimeout(typingTimerRef.current);\n    typingTimerRef.current = setTimeout(() => emitTypingStop(), 1500);\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend(e);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      flex: 1,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '32px',\n        height: '32px',\n        border: '2px solid var(--border)',\n        borderTopColor: 'var(--accent)',\n        borderRadius: '50%',\n        animation: 'spin 0.8s linear infinite'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      flex: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      gap: '12px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '32px'\n      },\n      children: \"\\u26D4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'var(--danger)',\n        fontSize: '16px'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigate('/dashboard'),\n      style: {\n        color: 'var(--accent)',\n        fontFamily: 'var(--font-mono)',\n        fontSize: '13px'\n      },\n      children: \"\\u2190 Back to Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n  const color = DEPT_COLORS[group === null || group === void 0 ? void 0 : (_group$departmentId = group.departmentId) === null || _group$departmentId === void 0 ? void 0 : _group$departmentId.name] || 'var(--accent)';\n  const isMyMessage = msg => {\n    var _msg$senderId;\n    const senderId = ((_msg$senderId = msg.senderId) === null || _msg$senderId === void 0 ? void 0 : _msg$senderId._id) || msg.senderId;\n    return senderId === (user === null || user === void 0 ? void 0 : user._id);\n  };\n  const groupedMessages = groupByDate(messages);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      flex: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      overflow: 'hidden'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '16px 24px',\n        borderBottom: '1px solid var(--border)',\n        background: 'var(--ink-2)',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '14px',\n        flexShrink: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '38px',\n          height: '38px',\n          borderRadius: '10px',\n          background: `${color}20`,\n          border: `1px solid ${color}40`,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          fontSize: '16px'\n        },\n        children: \"\\u25C8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontFamily: 'var(--font-display)',\n            fontWeight: 600,\n            fontSize: '16px'\n          },\n          children: group === null || group === void 0 ? void 0 : group.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '12px',\n            color: 'var(--text-muted)',\n            fontFamily: 'var(--font-mono)'\n          },\n          children: [group === null || group === void 0 ? void 0 : (_group$departmentId2 = group.departmentId) === null || _group$departmentId2 === void 0 ? void 0 : _group$departmentId2.name, \" Department \\xB7 Real-time Chat\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginLeft: 'auto',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '6px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '7px',\n            height: '7px',\n            borderRadius: '50%',\n            background: 'var(--success)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: '12px',\n            color: 'var(--text-muted)'\n          },\n          children: \"Live\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        overflowY: 'auto',\n        padding: '20px 24px',\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '2px'\n      },\n      children: [groupedMessages.map(([date, msgs]) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(DateDivider, {\n          label: date\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this), msgs.map((msg, i) => {\n          var _prevMsg$senderId, _msg$senderId2;\n          const mine = isMyMessage(msg);\n          const prevMsg = msgs[i - 1];\n          const showAvatar = !prevMsg || ((_prevMsg$senderId = prevMsg.senderId) === null || _prevMsg$senderId === void 0 ? void 0 : _prevMsg$senderId._id) !== ((_msg$senderId2 = msg.senderId) === null || _msg$senderId2 === void 0 ? void 0 : _msg$senderId2._id);\n          return /*#__PURE__*/_jsxDEV(MessageBubble, {\n            msg: msg,\n            mine: mine,\n            showAvatar: showAvatar,\n            color: color\n          }, msg._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 17\n          }, this);\n        })]\n      }, date, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this)), messages.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          flexDirection: 'column',\n          gap: '8px',\n          opacity: 0.4\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '40px'\n          },\n          children: \"\\u25C8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontFamily: 'var(--font-mono)',\n            fontSize: '13px',\n            color: 'var(--text-muted)'\n          },\n          children: \"No messages yet. Start the conversation!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 11\n      }, this), typingUsers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '12px',\n          color: 'var(--text-muted)',\n          fontStyle: 'italic',\n          padding: '4px 0',\n          animation: 'pulse 1.5s infinite'\n        },\n        children: [typingUsers.map(u => u.name).join(', '), \" \", typingUsers.length === 1 ? 'is' : 'are', \" typing...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSend,\n      style: {\n        padding: '16px 24px',\n        borderTop: '1px solid var(--border)',\n        background: 'var(--ink-2)',\n        display: 'flex',\n        gap: '12px',\n        alignItems: 'flex-end',\n        flexShrink: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: input,\n        onChange: handleTyping,\n        onKeyDown: handleKeyDown,\n        placeholder: `Message ${group === null || group === void 0 ? void 0 : group.name}...`,\n        rows: 1,\n        style: {\n          flex: 1,\n          padding: '11px 14px',\n          background: 'var(--surface)',\n          border: '1px solid var(--border)',\n          borderRadius: '10px',\n          color: 'var(--text-primary)',\n          fontSize: '14px',\n          resize: 'none',\n          fontFamily: 'var(--font-body)',\n          maxHeight: '120px',\n          overflow: 'auto',\n          outline: 'none',\n          transition: 'border-color 0.2s',\n          lineHeight: '1.5'\n        },\n        onFocus: e => e.target.style.borderColor = color,\n        onBlur: e => e.target.style.borderColor = 'var(--border)'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: !input.trim() || sending,\n        style: {\n          width: '42px',\n          height: '42px',\n          borderRadius: '10px',\n          background: input.trim() ? color : 'var(--surface-3)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          fontSize: '18px',\n          transition: 'all 0.2s',\n          flexShrink: 0,\n          cursor: input.trim() ? 'pointer' : 'default',\n          boxShadow: input.trim() ? `0 0 16px ${color}50` : 'none'\n        },\n        children: \"\\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatPage, \"eiy+2z/APAp8BtPkd/JbeQ32LBM=\", false, function () {\n  return [useParams, useAuth, useNavigate];\n});\n_c = ChatPage;\nfunction MessageBubble({\n  msg,\n  mine,\n  showAvatar,\n  color\n}) {\n  var _msg$senderId3;\n  const senderName = ((_msg$senderId3 = msg.senderId) === null || _msg$senderId3 === void 0 ? void 0 : _msg$senderId3.name) || 'Unknown';\n  const time = new Date(msg.createdAt).toLocaleTimeString([], {\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: mine ? 'row-reverse' : 'row',\n      gap: '8px',\n      marginTop: showAvatar ? '12px' : '2px',\n      alignItems: 'flex-end'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '32px',\n        flexShrink: 0\n      },\n      children: showAvatar && !mine && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '32px',\n          height: '32px',\n          borderRadius: '50%',\n          background: `${color}30`,\n          border: `1px solid ${color}50`,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          fontSize: '13px',\n          fontWeight: 700,\n          color: color\n        },\n        children: senderName[0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: '65%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: mine ? 'flex-end' : 'flex-start'\n      },\n      children: [showAvatar && !mine && /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          fontSize: '11px',\n          color: 'var(--text-muted)',\n          marginBottom: '4px',\n          fontFamily: 'var(--font-mono)'\n        },\n        children: senderName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '9px 13px',\n          background: mine ? color : 'var(--surface-2)',\n          borderRadius: mine ? '14px 14px 4px 14px' : '14px 14px 14px 4px',\n          fontSize: '14px',\n          lineHeight: '1.5',\n          color: mine ? 'white' : 'var(--text-primary)',\n          wordBreak: 'break-word'\n        },\n        children: msg.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          fontSize: '10px',\n          color: 'var(--text-muted)',\n          marginTop: '3px',\n          fontFamily: 'var(--font-mono)'\n        },\n        children: time\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 5\n  }, this);\n}\n_c2 = MessageBubble;\nfunction DateDivider({\n  label\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      gap: '12px',\n      margin: '12px 0 4px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        height: '1px',\n        background: 'var(--border)'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        fontSize: '11px',\n        color: 'var(--text-muted)',\n        fontFamily: 'var(--font-mono)',\n        whiteSpace: 'nowrap'\n      },\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        height: '1px',\n        background: 'var(--border)'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 291,\n    columnNumber: 5\n  }, this);\n}\n_c3 = DateDivider;\nfunction groupByDate(messages) {\n  const groups = {};\n  messages.forEach(msg => {\n    const date = new Date(msg.createdAt).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric'\n    });\n    if (!groups[date]) groups[date] = [];\n    groups[date].push(msg);\n  });\n  return Object.entries(groups);\n}\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ChatPage\");\n$RefreshReg$(_c2, \"MessageBubble\");\n$RefreshReg$(_c3, \"DateDivider\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","useParams","useNavigate","useAuth","groupAPI","messageAPI","getSocket","joinRoom","sendMessage","socketSend","emitTypingStart","emitTypingStop","jsxDEV","_jsxDEV","DEPT_COLORS","Frontend","Backend","Sales","Production","HR","ChatPage","_s","_group$departmentId","_group$departmentId2","groupId","user","navigate","group","setGroup","messages","setMessages","input","setInput","loading","setLoading","error","setError","typingUsers","setTypingUsers","sending","setSending","messagesEndRef","typingTimerRef","socketRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","load","groupRes","msgRes","Promise","all","getGroup","getGroupMessages","data","e","_e$response","_e$response$data","response","message","socket","onNewMessage","prev","filter","u","userId","senderId","_id","onError","msg","onUserTyping","name","find","onStoppedTyping","on","off","handleSend","preventDefault","trim","content","then","res","catch","_e$response2","_e$response2$data","finally","handleTyping","target","value","clearTimeout","setTimeout","handleKeyDown","key","shiftKey","style","flex","display","alignItems","justifyContent","children","width","height","border","borderTopColor","borderRadius","animation","fileName","_jsxFileName","lineNumber","columnNumber","flexDirection","gap","fontSize","color","onClick","fontFamily","departmentId","isMyMessage","_msg$senderId","groupedMessages","groupByDate","overflow","padding","borderBottom","background","flexShrink","fontWeight","marginLeft","overflowY","map","date","msgs","Fragment","DateDivider","label","i","_prevMsg$senderId","_msg$senderId2","mine","prevMsg","showAvatar","MessageBubble","length","opacity","fontStyle","join","ref","onSubmit","borderTop","onChange","onKeyDown","placeholder","rows","resize","maxHeight","outline","transition","lineHeight","onFocus","borderColor","onBlur","type","disabled","cursor","boxShadow","_c","_msg$senderId3","senderName","time","Date","createdAt","toLocaleTimeString","hour","minute","marginTop","maxWidth","marginBottom","wordBreak","_c2","margin","whiteSpace","_c3","groups","forEach","toLocaleDateString","month","day","year","push","Object","entries","$RefreshReg$"],"sources":["C:/Users/pawan/OneDrive/Desktop/team-management-fullcode/team-management/frontend/src/pages/ChatPage.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { groupAPI, messageAPI } from '../services/api';\nimport { getSocket, joinRoom, sendMessage as socketSend, emitTypingStart, emitTypingStop } from '../services/socket';\n\nconst DEPT_COLORS = {\n  Frontend: 'var(--dept-frontend)',\n  Backend: 'var(--dept-backend)',\n  Sales: 'var(--dept-sales)',\n  Production: 'var(--dept-production)',\n  HR: 'var(--dept-hr)',\n};\n\nexport default function ChatPage() {\n  const { groupId } = useParams();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [group, setGroup] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [typingUsers, setTypingUsers] = useState([]);\n  const [sending, setSending] = useState(false);\n  const messagesEndRef = useRef(null);\n  const typingTimerRef = useRef(null);\n  const socketRef = useRef(null);\n\n  const scrollToBottom = useCallback(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, []);\n\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const [groupRes, msgRes] = await Promise.all([\n          groupAPI.getGroup(groupId),\n          messageAPI.getGroupMessages(groupId),\n        ]);\n        setGroup(groupRes.data.data.group);\n        setMessages(msgRes.data.data.messages);\n      } catch (e) {\n        setError(e.response?.data?.message || 'Failed to load chat. Access denied.');\n      } finally { setLoading(false); }\n    };\n    load();\n  }, [groupId]);\n\n  // Socket setup\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket || !group) return;\n    socketRef.current = socket;\n\n    // Join room\n    joinRoom(groupId);\n\n    const onNewMessage = ({ message }) => {\n      setMessages(prev => [...prev, message]);\n      // Remove from typing when they send\n      setTypingUsers(prev => prev.filter(u => u.userId !== message.senderId._id));\n    };\n    const onError = ({ message: msg }) => setError(msg);\n    const onUserTyping = ({ userId, name }) => {\n      setTypingUsers(prev => {\n        if (prev.find(u => u.userId === userId)) return prev;\n        return [...prev, { userId, name }];\n      });\n    };\n    const onStoppedTyping = ({ userId }) => {\n      setTypingUsers(prev => prev.filter(u => u.userId !== userId));\n    };\n\n    socket.on('new_message', onNewMessage);\n    socket.on('error', onError);\n    socket.on('user_typing', onUserTyping);\n    socket.on('user_stopped_typing', onStoppedTyping);\n\n    return () => {\n      socket.off('new_message', onNewMessage);\n      socket.off('error', onError);\n      socket.off('user_typing', onUserTyping);\n      socket.off('user_stopped_typing', onStoppedTyping);\n    };\n  }, [group, groupId]);\n\n  useEffect(() => { scrollToBottom(); }, [messages, scrollToBottom]);\n\n  const handleSend = (e) => {\n    e.preventDefault();\n    if (!input.trim() || sending) return;\n\n    const socket = getSocket();\n    if (socket) {\n      socketSend(input.trim());\n      emitTypingStop();\n    } else {\n      // Fallback to REST\n      setSending(true);\n      messageAPI.sendMessage({ content: input.trim(), groupId })\n        .then(res => setMessages(prev => [...prev, res.data.data.message]))\n        .catch(e => setError(e.response?.data?.message || 'Failed to send'))\n        .finally(() => setSending(false));\n    }\n    setInput('');\n  };\n\n  const handleTyping = (e) => {\n    setInput(e.target.value);\n    emitTypingStart();\n    clearTimeout(typingTimerRef.current);\n    typingTimerRef.current = setTimeout(() => emitTypingStop(), 1500);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend(e);\n    }\n  };\n\n  if (loading) return (\n    <div style={{ flex: 1, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n      <div style={{ width: '32px', height: '32px', border: '2px solid var(--border)', borderTopColor: 'var(--accent)', borderRadius: '50%', animation: 'spin 0.8s linear infinite' }} />\n    </div>\n  );\n\n  if (error) return (\n    <div style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', gap: '12px' }}>\n      <div style={{ fontSize: '32px' }}>⛔</div>\n      <p style={{ color: 'var(--danger)', fontSize: '16px' }}>{error}</p>\n      <button onClick={() => navigate('/dashboard')} style={{ color: 'var(--accent)', fontFamily: 'var(--font-mono)', fontSize: '13px' }}>\n        ← Back to Dashboard\n      </button>\n    </div>\n  );\n\n  const color = DEPT_COLORS[group?.departmentId?.name] || 'var(--accent)';\n  const isMyMessage = (msg) => {\n    const senderId = msg.senderId?._id || msg.senderId;\n    return senderId === user?._id;\n  };\n\n  const groupedMessages = groupByDate(messages);\n\n  return (\n    <div style={{ flex: 1, display: 'flex', flexDirection: 'column', height: '100%', overflow: 'hidden' }}>\n      {/* Chat Header */}\n      <div style={{\n        padding: '16px 24px', borderBottom: '1px solid var(--border)',\n        background: 'var(--ink-2)', display: 'flex', alignItems: 'center', gap: '14px',\n        flexShrink: 0\n      }}>\n        <div style={{\n          width: '38px', height: '38px', borderRadius: '10px',\n          background: `${color}20`, border: `1px solid ${color}40`,\n          display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '16px'\n        }}>◈</div>\n        <div>\n          <div style={{ fontFamily: 'var(--font-display)', fontWeight: 600, fontSize: '16px' }}>\n            {group?.name}\n          </div>\n          <div style={{ fontSize: '12px', color: 'var(--text-muted)', fontFamily: 'var(--font-mono)' }}>\n            {group?.departmentId?.name} Department · Real-time Chat\n          </div>\n        </div>\n        <div style={{ marginLeft: 'auto', display: 'flex', alignItems: 'center', gap: '6px' }}>\n          <div style={{ width: '7px', height: '7px', borderRadius: '50%', background: 'var(--success)' }} />\n          <span style={{ fontSize: '12px', color: 'var(--text-muted)' }}>Live</span>\n        </div>\n      </div>\n\n      {/* Messages */}\n      <div style={{ flex: 1, overflowY: 'auto', padding: '20px 24px', display: 'flex', flexDirection: 'column', gap: '2px' }}>\n        {groupedMessages.map(([date, msgs]) => (\n          <React.Fragment key={date}>\n            <DateDivider label={date} />\n            {msgs.map((msg, i) => {\n              const mine = isMyMessage(msg);\n              const prevMsg = msgs[i - 1];\n              const showAvatar = !prevMsg || prevMsg.senderId?._id !== msg.senderId?._id;\n              return (\n                <MessageBubble key={msg._id} msg={msg} mine={mine} showAvatar={showAvatar} color={color} />\n              );\n            })}\n          </React.Fragment>\n        ))}\n        {messages.length === 0 && (\n          <div style={{ flex: 1, display: 'flex', alignItems: 'center', justifyContent: 'center', flexDirection: 'column', gap: '8px', opacity: 0.4 }}>\n            <div style={{ fontSize: '40px' }}>◈</div>\n            <p style={{ fontFamily: 'var(--font-mono)', fontSize: '13px', color: 'var(--text-muted)' }}>\n              No messages yet. Start the conversation!\n            </p>\n          </div>\n        )}\n        {typingUsers.length > 0 && (\n          <div style={{ fontSize: '12px', color: 'var(--text-muted)', fontStyle: 'italic', padding: '4px 0', animation: 'pulse 1.5s infinite' }}>\n            {typingUsers.map(u => u.name).join(', ')} {typingUsers.length === 1 ? 'is' : 'are'} typing...\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input */}\n      <form onSubmit={handleSend} style={{\n        padding: '16px 24px', borderTop: '1px solid var(--border)',\n        background: 'var(--ink-2)', display: 'flex', gap: '12px', alignItems: 'flex-end', flexShrink: 0\n      }}>\n        <textarea\n          value={input}\n          onChange={handleTyping}\n          onKeyDown={handleKeyDown}\n          placeholder={`Message ${group?.name}...`}\n          rows={1}\n          style={{\n            flex: 1, padding: '11px 14px',\n            background: 'var(--surface)', border: '1px solid var(--border)',\n            borderRadius: '10px', color: 'var(--text-primary)',\n            fontSize: '14px', resize: 'none', fontFamily: 'var(--font-body)',\n            maxHeight: '120px', overflow: 'auto', outline: 'none',\n            transition: 'border-color 0.2s',\n            lineHeight: '1.5'\n          }}\n          onFocus={e => e.target.style.borderColor = color}\n          onBlur={e => e.target.style.borderColor = 'var(--border)'}\n        />\n        <button type=\"submit\" disabled={!input.trim() || sending} style={{\n          width: '42px', height: '42px', borderRadius: '10px',\n          background: input.trim() ? color : 'var(--surface-3)',\n          display: 'flex', alignItems: 'center', justifyContent: 'center',\n          fontSize: '18px', transition: 'all 0.2s', flexShrink: 0,\n          cursor: input.trim() ? 'pointer' : 'default',\n          boxShadow: input.trim() ? `0 0 16px ${color}50` : 'none'\n        }}>\n          →\n        </button>\n      </form>\n    </div>\n  );\n}\n\nfunction MessageBubble({ msg, mine, showAvatar, color }) {\n  const senderName = msg.senderId?.name || 'Unknown';\n  const time = new Date(msg.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n\n  return (\n    <div style={{\n      display: 'flex', flexDirection: mine ? 'row-reverse' : 'row',\n      gap: '8px', marginTop: showAvatar ? '12px' : '2px',\n      alignItems: 'flex-end'\n    }}>\n      {/* Avatar */}\n      <div style={{ width: '32px', flexShrink: 0 }}>\n        {showAvatar && !mine && (\n          <div style={{\n            width: '32px', height: '32px', borderRadius: '50%',\n            background: `${color}30`, border: `1px solid ${color}50`,\n            display: 'flex', alignItems: 'center', justifyContent: 'center',\n            fontSize: '13px', fontWeight: 700, color: color\n          }}>{senderName[0]}</div>\n        )}\n      </div>\n\n      <div style={{ maxWidth: '65%', display: 'flex', flexDirection: 'column', alignItems: mine ? 'flex-end' : 'flex-start' }}>\n        {showAvatar && !mine && (\n          <span style={{ fontSize: '11px', color: 'var(--text-muted)', marginBottom: '4px', fontFamily: 'var(--font-mono)' }}>\n            {senderName}\n          </span>\n        )}\n        <div style={{\n          padding: '9px 13px',\n          background: mine ? color : 'var(--surface-2)',\n          borderRadius: mine ? '14px 14px 4px 14px' : '14px 14px 14px 4px',\n          fontSize: '14px', lineHeight: '1.5',\n          color: mine ? 'white' : 'var(--text-primary)',\n          wordBreak: 'break-word',\n        }}>\n          {msg.content}\n        </div>\n        <span style={{ fontSize: '10px', color: 'var(--text-muted)', marginTop: '3px', fontFamily: 'var(--font-mono)' }}>\n          {time}\n        </span>\n      </div>\n    </div>\n  );\n}\n\nfunction DateDivider({ label }) {\n  return (\n    <div style={{ display: 'flex', alignItems: 'center', gap: '12px', margin: '12px 0 4px' }}>\n      <div style={{ flex: 1, height: '1px', background: 'var(--border)' }} />\n      <span style={{ fontSize: '11px', color: 'var(--text-muted)', fontFamily: 'var(--font-mono)', whiteSpace: 'nowrap' }}>\n        {label}\n      </span>\n      <div style={{ flex: 1, height: '1px', background: 'var(--border)' }} />\n    </div>\n  );\n}\n\nfunction groupByDate(messages) {\n  const groups = {};\n  messages.forEach(msg => {\n    const date = new Date(msg.createdAt).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n    if (!groups[date]) groups[date] = [];\n    groups[date].push(msg);\n  });\n  return Object.entries(groups);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}