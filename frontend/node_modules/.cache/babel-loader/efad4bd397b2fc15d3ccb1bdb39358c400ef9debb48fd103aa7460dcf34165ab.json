{"ast":null,"code":"import React,{useEffect,useRef,useState,useCallback}from'react';import{useParams,useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{groupAPI,messageAPI}from'../services/api';import{getSocket,joinRoom,sendMessage as socketSend,emitTypingStart,emitTypingStop}from'../services/socket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DEPT_COLORS={Frontend:'var(--dept-frontend)',Backend:'var(--dept-backend)',Sales:'var(--dept-sales)',Production:'var(--dept-production)',HR:'var(--dept-hr)'};export default function ChatPage(){var _group$departmentId,_group$departmentId2;const{groupId}=useParams();const{user}=useAuth();const navigate=useNavigate();const[group,setGroup]=useState(null);const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[typingUsers,setTypingUsers]=useState([]);const[sending,setSending]=useState(false);const messagesEndRef=useRef(null);const typingTimerRef=useRef(null);const socketRef=useRef(null);const scrollToBottom=useCallback(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[]);useEffect(()=>{const load=async()=>{try{const[groupRes,msgRes]=await Promise.all([groupAPI.getGroup(groupId),messageAPI.getGroupMessages(groupId)]);setGroup(groupRes.data.data.group);setMessages(msgRes.data.data.messages);}catch(e){var _e$response,_e$response$data;setError(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.message)||'Failed to load chat. Access denied.');}finally{setLoading(false);}};load();},[groupId]);// Socket setup\nuseEffect(()=>{const socket=getSocket();if(!socket||!group)return;socketRef.current=socket;// Join room\njoinRoom(groupId);const onNewMessage=_ref=>{let{message}=_ref;setMessages(prev=>[...prev,message]);// Remove from typing when they send\nsetTypingUsers(prev=>prev.filter(u=>u.userId!==message.senderId._id));};const onError=_ref2=>{let{message:msg}=_ref2;return setError(msg);};const onUserTyping=_ref3=>{let{userId,name}=_ref3;setTypingUsers(prev=>{if(prev.find(u=>u.userId===userId))return prev;return[...prev,{userId,name}];});};const onStoppedTyping=_ref4=>{let{userId}=_ref4;setTypingUsers(prev=>prev.filter(u=>u.userId!==userId));};socket.on('new_message',onNewMessage);socket.on('error',onError);socket.on('user_typing',onUserTyping);socket.on('user_stopped_typing',onStoppedTyping);return()=>{socket.off('new_message',onNewMessage);socket.off('error',onError);socket.off('user_typing',onUserTyping);socket.off('user_stopped_typing',onStoppedTyping);};},[group,groupId]);useEffect(()=>{scrollToBottom();},[messages,scrollToBottom]);const handleSend=e=>{e.preventDefault();if(!input.trim()||sending)return;const socket=getSocket();if(socket){socketSend(input.trim());emitTypingStop();}else{// Fallback to REST\nsetSending(true);messageAPI.sendMessage({content:input.trim(),groupId}).then(res=>setMessages(prev=>[...prev,res.data.data.message])).catch(e=>{var _e$response2,_e$response2$data;return setError(((_e$response2=e.response)===null||_e$response2===void 0?void 0:(_e$response2$data=_e$response2.data)===null||_e$response2$data===void 0?void 0:_e$response2$data.message)||'Failed to send');}).finally(()=>setSending(false));}setInput('');};const handleTyping=e=>{setInput(e.target.value);emitTypingStart();clearTimeout(typingTimerRef.current);typingTimerRef.current=setTimeout(()=>emitTypingStop(),1500);};const handleKeyDown=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSend(e);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{style:{flex:1,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(\"div\",{style:{width:'32px',height:'32px',border:'2px solid var(--border)',borderTopColor:'var(--accent)',borderRadius:'50%',animation:'spin 0.8s linear infinite'}})});if(error)return/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',gap:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'32px'},children:\"\\u26D4\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--danger)',fontSize:'16px'},children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),style:{color:'var(--accent)',fontFamily:'var(--font-mono)',fontSize:'13px'},children:\"\\u2190 Back to Dashboard\"})]});const color=DEPT_COLORS[group===null||group===void 0?void 0:(_group$departmentId=group.departmentId)===null||_group$departmentId===void 0?void 0:_group$departmentId.name]||'var(--accent)';const isMyMessage=msg=>{var _msg$senderId;const senderId=((_msg$senderId=msg.senderId)===null||_msg$senderId===void 0?void 0:_msg$senderId._id)||msg.senderId;return senderId===(user===null||user===void 0?void 0:user._id);};const groupedMessages=groupByDate(messages);return/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:'flex',flexDirection:'column',height:'100%',overflow:'hidden'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'16px 24px',borderBottom:'1px solid var(--border)',background:'var(--ink-2)',display:'flex',alignItems:'center',gap:'14px',flexShrink:0},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'38px',height:'38px',borderRadius:'10px',background:\"\".concat(color,\"20\"),border:\"1px solid \".concat(color,\"40\"),display:'flex',alignItems:'center',justifyContent:'center',fontSize:'16px'},children:\"\\u25C8\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontFamily:'var(--font-display)',fontWeight:600,fontSize:'16px'},children:group===null||group===void 0?void 0:group.name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'var(--text-muted)',fontFamily:'var(--font-mono)'},children:[group===null||group===void 0?void 0:(_group$departmentId2=group.departmentId)===null||_group$departmentId2===void 0?void 0:_group$departmentId2.name,\" Department \\xB7 Real-time Chat\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:'auto',display:'flex',alignItems:'center',gap:'6px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'7px',height:'7px',borderRadius:'50%',background:'var(--success)'}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',color:'var(--text-muted)'},children:\"Live\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflowY:'auto',padding:'20px 24px',display:'flex',flexDirection:'column',gap:'2px'},children:[groupedMessages.map(_ref5=>{let[date,msgs]=_ref5;return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(DateDivider,{label:date}),msgs.map((msg,i)=>{var _prevMsg$senderId,_msg$senderId2;const mine=isMyMessage(msg);const prevMsg=msgs[i-1];const showAvatar=!prevMsg||((_prevMsg$senderId=prevMsg.senderId)===null||_prevMsg$senderId===void 0?void 0:_prevMsg$senderId._id)!==((_msg$senderId2=msg.senderId)===null||_msg$senderId2===void 0?void 0:_msg$senderId2._id);return/*#__PURE__*/_jsx(MessageBubble,{msg:msg,mine:mine,showAvatar:showAvatar,color:color},msg._id);})]},date);}),messages.length===0&&/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column',gap:'8px',opacity:0.4},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'40px'},children:\"\\u25C8\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontFamily:'var(--font-mono)',fontSize:'13px',color:'var(--text-muted)'},children:\"No messages yet. Start the conversation!\"})]}),typingUsers.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'var(--text-muted)',fontStyle:'italic',padding:'4px 0',animation:'pulse 1.5s infinite'},children:[typingUsers.map(u=>u.name).join(', '),\" \",typingUsers.length===1?'is':'are',\" typing...\"]}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSend,style:{padding:'16px 24px',borderTop:'1px solid var(--border)',background:'var(--ink-2)',display:'flex',gap:'12px',alignItems:'flex-end',flexShrink:0},children:[/*#__PURE__*/_jsx(\"textarea\",{value:input,onChange:handleTyping,onKeyDown:handleKeyDown,placeholder:\"Message \".concat(group===null||group===void 0?void 0:group.name,\"...\"),rows:1,style:{flex:1,padding:'11px 14px',background:'var(--surface)',border:'1px solid var(--border)',borderRadius:'10px',color:'var(--text-primary)',fontSize:'14px',resize:'none',fontFamily:'var(--font-body)',maxHeight:'120px',overflow:'auto',outline:'none',transition:'border-color 0.2s',lineHeight:'1.5'},onFocus:e=>e.target.style.borderColor=color,onBlur:e=>e.target.style.borderColor='var(--border)'}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!input.trim()||sending,style:{width:'42px',height:'42px',borderRadius:'10px',background:input.trim()?color:'var(--surface-3)',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'18px',transition:'all 0.2s',flexShrink:0,cursor:input.trim()?'pointer':'default',boxShadow:input.trim()?\"0 0 16px \".concat(color,\"50\"):'none'},children:\"\\u2192\"})]})]});}function MessageBubble(_ref6){var _msg$senderId3;let{msg,mine,showAvatar,color}=_ref6;const senderName=((_msg$senderId3=msg.senderId)===null||_msg$senderId3===void 0?void 0:_msg$senderId3.name)||'Unknown';const time=new Date(msg.createdAt).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:mine?'row-reverse':'row',gap:'8px',marginTop:showAvatar?'12px':'2px',alignItems:'flex-end'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'32px',flexShrink:0},children:showAvatar&&!mine&&/*#__PURE__*/_jsx(\"div\",{style:{width:'32px',height:'32px',borderRadius:'50%',background:\"\".concat(color,\"30\"),border:\"1px solid \".concat(color,\"50\"),display:'flex',alignItems:'center',justifyContent:'center',fontSize:'13px',fontWeight:700,color:color},children:senderName[0]})}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'65%',display:'flex',flexDirection:'column',alignItems:mine?'flex-end':'flex-start'},children:[showAvatar&&!mine&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'11px',color:'var(--text-muted)',marginBottom:'4px',fontFamily:'var(--font-mono)'},children:senderName}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'9px 13px',background:mine?color:'var(--surface-2)',borderRadius:mine?'14px 14px 4px 14px':'14px 14px 14px 4px',fontSize:'14px',lineHeight:'1.5',color:mine?'white':'var(--text-primary)',wordBreak:'break-word'},children:msg.content}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'10px',color:'var(--text-muted)',marginTop:'3px',fontFamily:'var(--font-mono)'},children:time})]})]});}function DateDivider(_ref7){let{label}=_ref7;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px',margin:'12px 0 4px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:1,height:'1px',background:'var(--border)'}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'11px',color:'var(--text-muted)',fontFamily:'var(--font-mono)',whiteSpace:'nowrap'},children:label}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,height:'1px',background:'var(--border)'}})]});}function groupByDate(messages){const groups={};messages.forEach(msg=>{const date=new Date(msg.createdAt).toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'});if(!groups[date])groups[date]=[];groups[date].push(msg);});return Object.entries(groups);}","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","useParams","useNavigate","useAuth","groupAPI","messageAPI","getSocket","joinRoom","sendMessage","socketSend","emitTypingStart","emitTypingStop","jsx","_jsx","jsxs","_jsxs","DEPT_COLORS","Frontend","Backend","Sales","Production","HR","ChatPage","_group$departmentId","_group$departmentId2","groupId","user","navigate","group","setGroup","messages","setMessages","input","setInput","loading","setLoading","error","setError","typingUsers","setTypingUsers","sending","setSending","messagesEndRef","typingTimerRef","socketRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","load","groupRes","msgRes","Promise","all","getGroup","getGroupMessages","data","e","_e$response","_e$response$data","response","message","socket","onNewMessage","_ref","prev","filter","u","userId","senderId","_id","onError","_ref2","msg","onUserTyping","_ref3","name","find","onStoppedTyping","_ref4","on","off","handleSend","preventDefault","trim","content","then","res","catch","_e$response2","_e$response2$data","finally","handleTyping","target","value","clearTimeout","setTimeout","handleKeyDown","key","shiftKey","style","flex","display","alignItems","justifyContent","children","width","height","border","borderTopColor","borderRadius","animation","flexDirection","gap","fontSize","color","onClick","fontFamily","departmentId","isMyMessage","_msg$senderId","groupedMessages","groupByDate","overflow","padding","borderBottom","background","flexShrink","concat","fontWeight","marginLeft","overflowY","map","_ref5","date","msgs","Fragment","DateDivider","label","i","_prevMsg$senderId","_msg$senderId2","mine","prevMsg","showAvatar","MessageBubble","length","opacity","fontStyle","join","ref","onSubmit","borderTop","onChange","onKeyDown","placeholder","rows","resize","maxHeight","outline","transition","lineHeight","onFocus","borderColor","onBlur","type","disabled","cursor","boxShadow","_ref6","_msg$senderId3","senderName","time","Date","createdAt","toLocaleTimeString","hour","minute","marginTop","maxWidth","marginBottom","wordBreak","_ref7","margin","whiteSpace","groups","forEach","toLocaleDateString","month","day","year","push","Object","entries"],"sources":["C:/Users/pawan/OneDrive/Desktop/team-management-fullcode/team-management/frontend/src/pages/ChatPage.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { groupAPI, messageAPI } from '../services/api';\nimport { getSocket, joinRoom, sendMessage as socketSend, emitTypingStart, emitTypingStop } from '../services/socket';\n\nconst DEPT_COLORS = {\n  Frontend: 'var(--dept-frontend)',\n  Backend: 'var(--dept-backend)',\n  Sales: 'var(--dept-sales)',\n  Production: 'var(--dept-production)',\n  HR: 'var(--dept-hr)',\n};\n\nexport default function ChatPage() {\n  const { groupId } = useParams();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [group, setGroup] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [typingUsers, setTypingUsers] = useState([]);\n  const [sending, setSending] = useState(false);\n  const messagesEndRef = useRef(null);\n  const typingTimerRef = useRef(null);\n  const socketRef = useRef(null);\n\n  const scrollToBottom = useCallback(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, []);\n\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const [groupRes, msgRes] = await Promise.all([\n          groupAPI.getGroup(groupId),\n          messageAPI.getGroupMessages(groupId),\n        ]);\n        setGroup(groupRes.data.data.group);\n        setMessages(msgRes.data.data.messages);\n      } catch (e) {\n        setError(e.response?.data?.message || 'Failed to load chat. Access denied.');\n      } finally { setLoading(false); }\n    };\n    load();\n  }, [groupId]);\n\n  // Socket setup\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket || !group) return;\n    socketRef.current = socket;\n\n    // Join room\n    joinRoom(groupId);\n\n    const onNewMessage = ({ message }) => {\n      setMessages(prev => [...prev, message]);\n      // Remove from typing when they send\n      setTypingUsers(prev => prev.filter(u => u.userId !== message.senderId._id));\n    };\n    const onError = ({ message: msg }) => setError(msg);\n    const onUserTyping = ({ userId, name }) => {\n      setTypingUsers(prev => {\n        if (prev.find(u => u.userId === userId)) return prev;\n        return [...prev, { userId, name }];\n      });\n    };\n    const onStoppedTyping = ({ userId }) => {\n      setTypingUsers(prev => prev.filter(u => u.userId !== userId));\n    };\n\n    socket.on('new_message', onNewMessage);\n    socket.on('error', onError);\n    socket.on('user_typing', onUserTyping);\n    socket.on('user_stopped_typing', onStoppedTyping);\n\n    return () => {\n      socket.off('new_message', onNewMessage);\n      socket.off('error', onError);\n      socket.off('user_typing', onUserTyping);\n      socket.off('user_stopped_typing', onStoppedTyping);\n    };\n  }, [group, groupId]);\n\n  useEffect(() => { scrollToBottom(); }, [messages, scrollToBottom]);\n\n  const handleSend = (e) => {\n    e.preventDefault();\n    if (!input.trim() || sending) return;\n\n    const socket = getSocket();\n    if (socket) {\n      socketSend(input.trim());\n      emitTypingStop();\n    } else {\n      // Fallback to REST\n      setSending(true);\n      messageAPI.sendMessage({ content: input.trim(), groupId })\n        .then(res => setMessages(prev => [...prev, res.data.data.message]))\n        .catch(e => setError(e.response?.data?.message || 'Failed to send'))\n        .finally(() => setSending(false));\n    }\n    setInput('');\n  };\n\n  const handleTyping = (e) => {\n    setInput(e.target.value);\n    emitTypingStart();\n    clearTimeout(typingTimerRef.current);\n    typingTimerRef.current = setTimeout(() => emitTypingStop(), 1500);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend(e);\n    }\n  };\n\n  if (loading) return (\n    <div style={{ flex: 1, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n      <div style={{ width: '32px', height: '32px', border: '2px solid var(--border)', borderTopColor: 'var(--accent)', borderRadius: '50%', animation: 'spin 0.8s linear infinite' }} />\n    </div>\n  );\n\n  if (error) return (\n    <div style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', gap: '12px' }}>\n      <div style={{ fontSize: '32px' }}>⛔</div>\n      <p style={{ color: 'var(--danger)', fontSize: '16px' }}>{error}</p>\n      <button onClick={() => navigate('/dashboard')} style={{ color: 'var(--accent)', fontFamily: 'var(--font-mono)', fontSize: '13px' }}>\n        ← Back to Dashboard\n      </button>\n    </div>\n  );\n\n  const color = DEPT_COLORS[group?.departmentId?.name] || 'var(--accent)';\n  const isMyMessage = (msg) => {\n    const senderId = msg.senderId?._id || msg.senderId;\n    return senderId === user?._id;\n  };\n\n  const groupedMessages = groupByDate(messages);\n\n  return (\n    <div style={{ flex: 1, display: 'flex', flexDirection: 'column', height: '100%', overflow: 'hidden' }}>\n      {/* Chat Header */}\n      <div style={{\n        padding: '16px 24px', borderBottom: '1px solid var(--border)',\n        background: 'var(--ink-2)', display: 'flex', alignItems: 'center', gap: '14px',\n        flexShrink: 0\n      }}>\n        <div style={{\n          width: '38px', height: '38px', borderRadius: '10px',\n          background: `${color}20`, border: `1px solid ${color}40`,\n          display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '16px'\n        }}>◈</div>\n        <div>\n          <div style={{ fontFamily: 'var(--font-display)', fontWeight: 600, fontSize: '16px' }}>\n            {group?.name}\n          </div>\n          <div style={{ fontSize: '12px', color: 'var(--text-muted)', fontFamily: 'var(--font-mono)' }}>\n            {group?.departmentId?.name} Department · Real-time Chat\n          </div>\n        </div>\n        <div style={{ marginLeft: 'auto', display: 'flex', alignItems: 'center', gap: '6px' }}>\n          <div style={{ width: '7px', height: '7px', borderRadius: '50%', background: 'var(--success)' }} />\n          <span style={{ fontSize: '12px', color: 'var(--text-muted)' }}>Live</span>\n        </div>\n      </div>\n\n      {/* Messages */}\n      <div style={{ flex: 1, overflowY: 'auto', padding: '20px 24px', display: 'flex', flexDirection: 'column', gap: '2px' }}>\n        {groupedMessages.map(([date, msgs]) => (\n          <React.Fragment key={date}>\n            <DateDivider label={date} />\n            {msgs.map((msg, i) => {\n              const mine = isMyMessage(msg);\n              const prevMsg = msgs[i - 1];\n              const showAvatar = !prevMsg || prevMsg.senderId?._id !== msg.senderId?._id;\n              return (\n                <MessageBubble key={msg._id} msg={msg} mine={mine} showAvatar={showAvatar} color={color} />\n              );\n            })}\n          </React.Fragment>\n        ))}\n        {messages.length === 0 && (\n          <div style={{ flex: 1, display: 'flex', alignItems: 'center', justifyContent: 'center', flexDirection: 'column', gap: '8px', opacity: 0.4 }}>\n            <div style={{ fontSize: '40px' }}>◈</div>\n            <p style={{ fontFamily: 'var(--font-mono)', fontSize: '13px', color: 'var(--text-muted)' }}>\n              No messages yet. Start the conversation!\n            </p>\n          </div>\n        )}\n        {typingUsers.length > 0 && (\n          <div style={{ fontSize: '12px', color: 'var(--text-muted)', fontStyle: 'italic', padding: '4px 0', animation: 'pulse 1.5s infinite' }}>\n            {typingUsers.map(u => u.name).join(', ')} {typingUsers.length === 1 ? 'is' : 'are'} typing...\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input */}\n      <form onSubmit={handleSend} style={{\n        padding: '16px 24px', borderTop: '1px solid var(--border)',\n        background: 'var(--ink-2)', display: 'flex', gap: '12px', alignItems: 'flex-end', flexShrink: 0\n      }}>\n        <textarea\n          value={input}\n          onChange={handleTyping}\n          onKeyDown={handleKeyDown}\n          placeholder={`Message ${group?.name}...`}\n          rows={1}\n          style={{\n            flex: 1, padding: '11px 14px',\n            background: 'var(--surface)', border: '1px solid var(--border)',\n            borderRadius: '10px', color: 'var(--text-primary)',\n            fontSize: '14px', resize: 'none', fontFamily: 'var(--font-body)',\n            maxHeight: '120px', overflow: 'auto', outline: 'none',\n            transition: 'border-color 0.2s',\n            lineHeight: '1.5'\n          }}\n          onFocus={e => e.target.style.borderColor = color}\n          onBlur={e => e.target.style.borderColor = 'var(--border)'}\n        />\n        <button type=\"submit\" disabled={!input.trim() || sending} style={{\n          width: '42px', height: '42px', borderRadius: '10px',\n          background: input.trim() ? color : 'var(--surface-3)',\n          display: 'flex', alignItems: 'center', justifyContent: 'center',\n          fontSize: '18px', transition: 'all 0.2s', flexShrink: 0,\n          cursor: input.trim() ? 'pointer' : 'default',\n          boxShadow: input.trim() ? `0 0 16px ${color}50` : 'none'\n        }}>\n          →\n        </button>\n      </form>\n    </div>\n  );\n}\n\nfunction MessageBubble({ msg, mine, showAvatar, color }) {\n  const senderName = msg.senderId?.name || 'Unknown';\n  const time = new Date(msg.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n\n  return (\n    <div style={{\n      display: 'flex', flexDirection: mine ? 'row-reverse' : 'row',\n      gap: '8px', marginTop: showAvatar ? '12px' : '2px',\n      alignItems: 'flex-end'\n    }}>\n      {/* Avatar */}\n      <div style={{ width: '32px', flexShrink: 0 }}>\n        {showAvatar && !mine && (\n          <div style={{\n            width: '32px', height: '32px', borderRadius: '50%',\n            background: `${color}30`, border: `1px solid ${color}50`,\n            display: 'flex', alignItems: 'center', justifyContent: 'center',\n            fontSize: '13px', fontWeight: 700, color: color\n          }}>{senderName[0]}</div>\n        )}\n      </div>\n\n      <div style={{ maxWidth: '65%', display: 'flex', flexDirection: 'column', alignItems: mine ? 'flex-end' : 'flex-start' }}>\n        {showAvatar && !mine && (\n          <span style={{ fontSize: '11px', color: 'var(--text-muted)', marginBottom: '4px', fontFamily: 'var(--font-mono)' }}>\n            {senderName}\n          </span>\n        )}\n        <div style={{\n          padding: '9px 13px',\n          background: mine ? color : 'var(--surface-2)',\n          borderRadius: mine ? '14px 14px 4px 14px' : '14px 14px 14px 4px',\n          fontSize: '14px', lineHeight: '1.5',\n          color: mine ? 'white' : 'var(--text-primary)',\n          wordBreak: 'break-word',\n        }}>\n          {msg.content}\n        </div>\n        <span style={{ fontSize: '10px', color: 'var(--text-muted)', marginTop: '3px', fontFamily: 'var(--font-mono)' }}>\n          {time}\n        </span>\n      </div>\n    </div>\n  );\n}\n\nfunction DateDivider({ label }) {\n  return (\n    <div style={{ display: 'flex', alignItems: 'center', gap: '12px', margin: '12px 0 4px' }}>\n      <div style={{ flex: 1, height: '1px', background: 'var(--border)' }} />\n      <span style={{ fontSize: '11px', color: 'var(--text-muted)', fontFamily: 'var(--font-mono)', whiteSpace: 'nowrap' }}>\n        {label}\n      </span>\n      <div style={{ flex: 1, height: '1px', background: 'var(--border)' }} />\n    </div>\n  );\n}\n\nfunction groupByDate(messages) {\n  const groups = {};\n  messages.forEach(msg => {\n    const date = new Date(msg.createdAt).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n    if (!groups[date]) groups[date] = [];\n    groups[date].push(msg);\n  });\n  return Object.entries(groups);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}